<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bei LENZZ ‚Äì Online-Shop</title>
<meta name="description" content="Bei LENZZ ‚Äì stilvoll shoppen. Warenkorb, Gast-Checkout, Kartenzahlung via Stripe Payment Links.">
<meta name="theme-color" content="#0ea5e9">
<style>
:root{--bg:#0b0f14;--bg2:#0f141b;--text:#e6edf3;--muted:#9fb2c7;--brand:#0ea5e9;--brand2:#22d3ee;--card:#0f1720;--border:#1f2a36;--ok:#16a34a;--err:#ef4444;--shadow:0 12px 30px rgba(0,0,0,.35)}
@media (prefers-color-scheme: light){:root{--bg:#fff;--bg2:#f7fafc;--text:#0b1220;--muted:#516174;--card:#fff;--border:#e5e7eb;--shadow:0 12px 30px rgba(2,8,23,.06)}}
*{box-sizing:border-box}html:focus-within{scroll-behavior:smooth}
body{margin:0;font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;color:var(--text);background:radial-gradient(1200px 600px at 80% -10%, rgba(56,189,248,.15), transparent 60%), var(--bg)}
a{color:var(--brand);text-decoration:none}a:hover{text-decoration:underline}
img{max-width:100%;display:block}
h1,h2,h3{line-height:1.2;margin:0 0 .5rem}
h1{font-size:clamp(1.8rem,3vw+1rem,2.6rem)}h2{font-size:clamp(1.4rem,2vw+1rem,2rem)}h3{font-size:1.1rem}
.container{max-width:1120px;margin-inline:auto;padding:0 1rem}
.section{padding:3.5rem 0}.section.alt{background:var(--bg2)}
.muted{color:var(--muted)}.btn{display:inline-flex;align-items:center;gap:.5rem;padding:.7rem 1rem;border:1px solid var(--border);border-radius:.75rem;background:var(--card);color:var(--text);cursor:pointer}
.btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;border:none;box-shadow:var(--shadow)}
.btn.ghost{background:transparent}
.badge{display:inline-block;font:700 .75rem/1 system-ui;padding:.3rem .5rem;border-radius:.5rem;background:color-mix(in oklab, var(--brand) 25%, transparent);color:var(--brand)}
input,select{width:100%;padding:.7rem .8rem;border-radius:.6rem;border:1px solid var(--border);background:var(--card);color:var(--text)}
.grid{display:grid;gap:1rem}

/* Header */
.site-header{position:sticky;top:0;z-index:50;background:color-mix(in oklab,var(--bg) 80%, transparent);backdrop-filter:saturate(180%) blur(12px);border-bottom:1px solid var(--border)}
.header-inner{display:flex;align-items:center;justify-content:space-between;gap:1rem;min-height:68px}
.brand{display:flex;align-items:center;gap:.7rem;color:var(--text);font-weight:800;letter-spacing:.3px}
.brand svg{width:34px;height:34px}
.nav{display:flex;align-items:center;gap:.75rem}
.nav .cart-btn{position:relative}
.cart-count{position:absolute;top:-6px;right:-6px;background:var(--brand);color:#fff;border-radius:999px;padding:0 .35rem;font:700 .72rem/1 system-ui}

/* Hero */
.hero{padding:5rem 0 3rem;background:radial-gradient(800px 400px at -10% 0%, rgba(34,211,238,.18), transparent 60%)}
.hero-inner{display:grid;grid-template-columns:1.2fr .8fr;gap:2rem;align-items:center}
@media (max-width: 900px){.hero-inner{grid-template-columns:1fr}}
.features{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:.5rem;list-style:none;padding:0;margin:1rem 0 0}

/* Products */
.controls{display:flex;gap:.75rem;flex-wrap:wrap;margin:1rem 0}
.products{grid-template-columns:repeat(3,minmax(0,1fr))}@media (max-width:900px){.products{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--border);border-radius:1rem;box-shadow:var(--shadow);overflow:hidden}
.product{display:grid;grid-template-rows:auto auto 1fr auto;gap:.6rem}
.product .media{aspect-ratio:4/3;background:var(--bg2);display:flex;align-items:center;justify-content:center}
.product .body{padding:1rem}.product .foot{padding:1rem;display:flex;align-items:center;justify-content:space-between}

/* Cart Drawer */
.drawer{position:fixed;inset:0;pointer-events:none}
.drawer.open{pointer-events:auto}
.panel{margin-left:auto;height:100%;max-width:440px;width:100%;background:var(--card);border-left:1px solid var(--border);transform:translateX(110%);transition:transform .25s ease;display:flex;flex-direction:column}
.drawer.open .panel{transform:translateX(0)}
.backdrop{background:rgba(0,0,0,.45);opacity:0;transition:opacity .2s ease}
.drawer.open .backdrop{opacity:1}
.cart-head{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-bottom:1px solid var(--border)}
.cart-items{flex:1;overflow:auto;padding:1rem;display:grid;gap:.75rem}
.cart-item{display:grid;grid-template-columns:72px 1fr auto;gap:.75rem;align-items:center}
.cart-item img{width:72px;height:54px;object-fit:cover;border-radius:.5rem;border:1px solid var(--border)}
.cart-sum{border-top:1px solid var(--border);padding:1rem;display:grid;gap:.4rem}
.row{display:flex;justify-content:space-between;align-items:center}

/* Modal */
.modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.45)}
.modal.open{display:grid}
.modal>div{width:min(560px,92vw);background:var(--card);border:1px solid var(--border);border-radius:1rem;box-shadow:var(--shadow);padding:1rem}
.form{display:grid;gap:.9rem;margin-top:.6rem}

/* Admin Ribbon (sichtbar + vorn) */
.admin-ribbon{position:fixed;left:0;bottom:0;z-index:1000;padding:.35rem .6rem;border-top-right-radius:.6rem;background:color-mix(in oklab, var(--brand) 25%, transparent);backdrop-filter:blur(4px);border:1px solid var(--border);border-left:none;border-bottom:none}
.admin-ribbon button{border:0;background:transparent;color:var(--text);cursor:pointer}
</style>
</head>
<body>

<!-- Header -->
<header class="site-header">
  <div class="container header-inner">
    <a class="brand" href="#" aria-label="Startseite">
      <!-- LOGO: eindeutige Gradient-ID -->
      <svg viewBox="0 0 64 64" aria-hidden="true" role="img">
        <defs>
          <linearGradient id="logoGradLENZZ" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#0ea5e9"/><stop offset="100%" stop-color="#22d3ee"/>
          </linearGradient>
        </defs>
        <rect x="2" y="2" width="60" height="60" rx="14" fill="url(#logoGradLENZZ)"></rect>
        <path d="M18 42 L18 22 L32 22 Q42 22 42 32 Q42 42 32 42 Z M30 30 L30 34 L32 34 Q36 34 36 32 Q36 30 32 30 Z" fill="white"/>
      </svg>
      <span>Bei&nbsp;LENZZ</span>
    </a>
    <nav class="nav" aria-label="Navigation">
      <button id="btn-admin-hdr" class="btn ghost" title="Admin √∂ffnen">Admin</button>
      <button id="btn-login" class="btn ghost">Anmelden</button>
      <button id="btn-cart" class="btn cart-btn">Warenkorb üõí<span id="cart-count" class="cart-count">0</span></button>
    </nav>
  </div>
</header>

<!-- Hero -->
<section class="hero">
  <div class="container hero-inner">
    <div>
      <span class="badge">Neu</span>
      <h1>Stil, der bleibt. Shoppe Bei LENZZ.</h1>
      <p class="muted">Sch√∂ne Essentials zu fairen Preisen. Ohne Schnickschnack ‚Äì mit Gef√ºhl.</p>
      <div style="display:flex;gap:.6rem;flex-wrap:wrap">
        <a href="#produkte" class="btn primary">Jetzt st√∂bern</a>
        <a href="#vorteile" class="btn ghost">Warum Bei LENZZ?</a>
      </div>
      <ul class="features">
        <li>‚ö°Ô∏è Schnell & mobilfreundlich</li>
        <li>üõí Gast-Checkout m√∂glich</li>
        <li>üí≥ Kartenzahlung via Stripe-Link</li>
      </ul>
    </div>
    <figure aria-hidden="true">
      <svg viewBox="0 0 480 340"><rect width="480" height="340" rx="24" fill="url(#grad)"></rect>
        <defs><linearGradient id="grad" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#0ea5e9"/><stop offset="100%" stop-color="#22d3ee"/></linearGradient></defs>
        <g fill="white" opacity=".9"><circle cx="380" cy="80" r="34"/><rect x="80" y="120" width="240" height="16" rx="8"/><rect x="80" y="152" width="180" height="16" rx="8"/><rect x="80" y="184" width="220" height="16" rx="8"/></g>
      </svg>
    </figure>
  </div>
</section>

<!-- Products -->
<main class="section" id="produkte">
  <div class="container">
    <header>
      <h2>Produkte</h2>
      <p class="muted">Alle Preise inkl. MwSt. zzgl. Versand.</p>
      <div class="controls">
        <input id="q" placeholder="Suche nach Produkt/Kategorie ‚Ä¶" aria-label="Suche">
        <select id="cat" aria-label="Kategorie"><option value="">Alle Kategorien</option></select>
        <select id="sort" aria-label="Sortierung">
          <option value="popular">Beliebtheit</option><option value="price-asc">Preis aufsteigend</option>
          <option value="price-desc">Preis absteigend</option><option value="name">Name A‚ÄìZ</option>
        </select>
      </div>
    </header>
    <div id="grid" class="grid products"></div>
  </div>
</main>

<!-- Vorteile -->
<section class="section alt" id="vorteile">
  <div class="container">
    <h2>Warum Bei LENZZ?</h2>
    <div class="grid" style="grid-template-columns:repeat(3,minmax(0,1fr))">
      <article class="card" style="padding:1rem"><h3>Schneller Versand</h3><p class="muted">In 1‚Äì3 Werktagen bei dir.</p></article>
      <article class="card" style="padding:1rem"><h3>Faire Preise</h3><p class="muted">Transparent & ehrlich kalkuliert.</p></article>
      <article class="card" style="padding:1rem"><h3>Sichere Bezahlung</h3><p class="muted">Kreditkarte via Stripe-Link.</p></article>
    </div>
  </div>
</section>

<!-- Cart Drawer -->
<aside id="drawer" class="drawer" aria-hidden="true" aria-label="Warenkorb">
  <div class="panel">
    <div class="cart-head"><h2>Warenkorb</h2><button id="close-cart" class="btn">‚úï</button></div>
    <div id="cart-items" class="cart-items"></div>
    <div class="cart-sum">
      <div class="row"><span>Zwischensumme</span><strong id="sum">0,00 ‚Ç¨</strong></div>
      <small class="muted">Alle Preise inkl. MwSt. zzgl. Versand</small>
      <button id="to-checkout" class="btn primary">Zur Kasse</button>
    </div>
  </div>
  <div class="backdrop"></div>
</aside>

<!-- Modal: Auth -->
<div id="auth-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="auth-title">
  <div>
    <h2 id="auth-title">Anmelden oder Konto erstellen</h2>
    <p class="muted">Du kannst auch als Gast fortfahren.</p>
    <div class="form">
      <label>E-Mail<input id="auth-email" type="email" autocomplete="email" placeholder="du@example.com"></label>
      <label>Passwort<input id="auth-pass" type="password" autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></label>
      <div style="display:flex;gap:.5rem;flex-wrap:wrap">
        <button id="login" class="btn primary">Anmelden</button>
        <button id="register" class="btn">Konto erstellen</button>
        <button id="guest" class="btn ghost">Als Gast fortfahren</button>
      </div>
      <div id="auth-msg" class="muted"></div>
    </div>
  </div>
</div>

<!-- Modal: Checkout -->
<div id="co-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="co-title">
  <div>
    <h2 id="co-title">Lieferadresse</h2>
    <div class="form">
      <label>Vor- & Nachname<input id="co-name" required></label>
      <label>E-Mail<input id="co-email" type="email" required></label>
      <label>Stra√üe & Nr.<input id="co-street" required></label>
      <div class="grid" style="grid-template-columns:1fr 1fr;gap:.75rem">
        <label>PLZ<input id="co-zip" required></label>
        <label>Stadt<input id="co-city" required></label>
      </div>
      <label>Land
        <select id="co-country" required>
          <option value="DE">Deutschland</option><option value="AT">√ñsterreich</option><option value="CH">Schweiz</option>
        </select>
      </label>
      <div class="row" style="gap:.5rem">
        <button id="co-pay" class="btn primary">Zahlung starten</button>
        <button id="co-cancel" class="btn">Abbrechen</button>
      </div>
      <div id="co-msg" class="muted"></div>
    </div>
  </div>
</div>

<!-- Admin Ribbon -->
<div class="admin-ribbon"><button id="admin-open">‚öôÔ∏è Admin</button></div>

<!-- Modal: Admin -->
<div id="admin-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="admin-title">
  <div>
    <h2 id="admin-title">Adminbereich ‚Äì Produkte verwalten</h2>
    <p class="muted">Login: <code>admin@lenzz.shop</code> / <code>LENZZadmin2025</code> (im Code √§nderbar).</p>
    <div id="admin-auth" class="form">
      <label>E-Mail<input id="adm-email" type="email" value="admin@lenzz.shop"></label>
      <label>Passwort<input id="adm-pass" type="password" value="LENZZadmin2025"></label>
      <button id="adm-login" class="btn primary">Einloggen</button>
      <div id="adm-msg" class="muted"></div>
    </div>

    <div id="admin-app" class="hide">
      <h3>Produkt anlegen/bearbeiten</h3>
      <div class="form">
        <label>ID<input id="p-id" placeholder="z.B. lenzz-hoodie"></label>
        <label>Name<input id="p-name" placeholder="Produktname"></label>
        <div class="grid" style="grid-template-columns:1fr 1fr;gap:.75rem">
          <label>Preis (EUR)<input id="p-price" type="number" step="0.01"></label>
          <label>Kategorie<input id="p-cat" placeholder="z.B. Bekleidung"></label>
        </div>
        <label>Bild-URL<input id="p-img" placeholder="https://‚Ä¶"></label>
        <label>Badges (kommagetrennt)<input id="p-badges" placeholder="Neu, Bestseller"></label>
        <div style="display:flex;gap:.5rem;flex-wrap:wrap">
          <button id="save-product" class="btn primary">Speichern/Aktualisieren</button>
          <button id="delete-product" class="btn">L√∂schen</button>
        </div>
      </div>

      <h3 style="margin-top:1rem">Daten</h3>
      <div style="display:flex;gap:.5rem;flex-wrap:wrap">
        <button id="export-json" class="btn">Export JSON</button>
        <button id="import-json" class="btn">Import JSON</button>
        <input id="import-file" type="file" accept="application/json" style="display:none">
        <button id="close-admin" class="btn">Schlie√üen</button>
      </div>
    </div>
  </div>
</div>

<script>
/* ============ KONFIG ============ */
const PAYMENT_MODE = "links";
const PRODUCT_PAYMENT_LINKS = {
  'lenzz-hoodie':'https://example.com/stripe-link-hoodie',
  'lenzz-shirt':'https://example.com/stripe-link-shirt'
};
const ADMIN_EMAIL = 'admin@lenzz.shop';
const ADMIN_PASS  = 'LENZZadmin2025';

const DEFAULT_PRODUCTS = [
  {id:'lenzz-hoodie', name:'LENZZ Hoodie', price:59.90, category:'Bekleidung', image:'https://via.placeholder.com/640x480?text=LENZZ+Hoodie', badges:['Bestseller']},
  {id:'lenzz-shirt',  name:'LENZZ T-Shirt', price:24.90, category:'Bekleidung', image:'https://via.placeholder.com/640x480?text=LENZZ+T-Shirt',  badges:['Neu']},
  {id:'lenzz-cap',    name:'LENZZ Cap',    price:19.90, category:'Accessoires', image:'https://via.placeholder.com/640x480?text=LENZZ+Cap',    badges:[]},
  {id:'lenzz-mug',    name:'LENZZ Becher', price:14.50, category:'Home',        image:'https://via.placeholder.com/640x480?text=LENZZ+Becher', badges:[]}
];

/* ============ UTIL & STATE ============ */
const ‚Ç¨ = n => new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'}).format(n);
const qs = (s,el=document)=>el.querySelector(s);
const store = { get(k,d){try{return JSON.parse(localStorage.getItem(k))??d}catch{return d}}, set(k,v){localStorage.setItem(k,JSON.stringify(v))} };

const STATE = {
  products: store.get('lenzz_products', DEFAULT_PRODUCTS),
  cart: store.get('lenzz_cart', []),
  user: store.get('lenzz_user', null)
};
function save(){ store.set('lenzz_products',STATE.products); store.set('lenzz_cart',STATE.cart); store.set('lenzz_user',STATE.user); }

/* ============ PRODUCTS UI ============ */
const grid=qs('#grid'), catSel=qs('#cat'), sortSel=qs('#sort'), qInput=qs('#q');
function rebuildCategories(){
  const cats=[...new Set(STATE.products.map(p=>p.category))].sort();
  catSel.innerHTML='<option value="">Alle Kategorien</option>'+cats.map(c=>`<option>${c}</option>`).join('');
}
function renderProducts(list){
  grid.innerHTML=''; list.forEach(p=>{
    const card=document.createElement('article'); card.className='card product';
    card.innerHTML=`
      <div class="media"><img src="${p.image}" alt="${p.name}" loading="lazy"></div>
      <div class="body"><div>${(p.badges||[]).map(b=>`<span class="badge">${b}</span>`).join('')}</div>
        <h3>${p.name}</h3><div class="muted">${p.category}</div></div>
      <div class="foot"><strong>${‚Ç¨(p.price)}</strong><button class="btn primary" data-add="${p.id}">In den Warenkorb</button></div>`;
    grid.appendChild(card);
  });
}
function applyFilters(){
  const t=(qInput.value||'').toLowerCase().trim(); const c=catSel.value;
  let list=STATE.products.filter(p=>(!c||p.category===c)&&(!t||p.name.toLowerCase().includes(t)||p.category.toLowerCase().includes(t)));
  switch(sortSel.value){case'price-asc':list.sort((a,b)=>a.price-b.price);break;case'price-desc':list.sort((a,b)=>b.price-a.price);break;case'name':list.sort((a,b)=>a.name.localeCompare(b.name));break;}
  renderProducts(list);
}
[qInput,catSel,sortSel].forEach(el=>el.addEventListener('input',applyFilters));
grid.addEventListener('click',e=>{const b=e.target.closest('[data-add]'); if(b) addToCart(b.dataset.add,1);});

/* ============ CART ============ */
const drawer=qs('#drawer'), cartEl=qs('#cart-items'), sumEl=qs('#sum'), cartCount=qs('#cart-count');
function openCart(){drawer.classList.add('open');drawer.setAttribute('aria-hidden','false')}
function closeCart(){drawer.classList.remove('open');drawer.setAttribute('aria-hidden','true')}
qs('#btn-cart').addEventListener('click',openCart); qs('#close-cart').addEventListener('click',closeCart); drawer.querySelector('.backdrop').addEventListener('click',closeCart);

function updateCartUI(){
  cartEl.innerHTML=''; let total=0, count=0;
  STATE.cart.forEach(it=>{const p=STATE.products.find(x=>x.id===it.id); if(!p) return;
    const line=p.price*it.qty; total+=line; count+=it.qty;
    const row=document.createElement('div'); row.className='cart-item';
    row.innerHTML=`<img src="${p.image}" alt="${p.name}">
      <div><strong>${p.name}</strong><div class="muted">${it.qty} √ó ${‚Ç¨(p.price)}</div></div>
      <div><button class="btn" data-dec="${p.id}">‚àí</button><button class="btn" data-inc="${p.id}">+</button><button class="btn" data-del="${p.id}">üóëÔ∏è</button></div>`;
    cartEl.appendChild(row);
  });
  cartCount.textContent=count; sumEl.textContent=‚Ç¨(total); save();
}
cartEl.addEventListener('click',e=>{
  const d=e.target.closest('[data-dec]'), i=e.target.closest('[data-inc]'), del=e.target.closest('[data-del]');
  if(d){setQty(d.dataset.dec,(STATE.cart.find(x=>x.id===d.dataset.dec)?.qty||1)-1)}
  if(i){setQty(i.dataset.inc,(STATE.cart.find(x=>x.id===i.dataset.inc)?.qty||0)+1)}
  if(del){setQty(del.dataset.del,0)}
});
function addToCart(id,qty=1){const it=STATE.cart.find(i=>i.id===id); if(it) it.qty+=qty; else STATE.cart.push({id,qty}); updateCartUI(); openCart();}
function setQty(id,qty){const it=STATE.cart.find(i=>i.id===id); if(!it)return; it.qty=Math.max(0,qty|0); if(it.qty===0) STATE.cart=STATE.cart.filter(x=>x!==it); updateCartUI();}

/* ============ AUTH (Demo) ============ */
const authModal=qs('#auth-modal'), authEmail=qs('#auth-email'), authPass=qs('#auth-pass'), authMsg=qs('#auth-msg');
function showAuth(){authModal.classList.add('open')} function hideAuth(){authModal.classList.remove('open')}
qs('#btn-login').addEventListener('click',showAuth); authModal.addEventListener('click',e=>{if(e.target===authModal)hideAuth()});

function loginOrRegister(mode){
  authMsg.textContent=''; const email=(authEmail.value||'').trim().toLowerCase(); const pass=(authPass.value||'').trim();
  if(!email||!pass){authMsg.textContent='Bitte E-Mail & Passwort eingeben.';return}
  let users=store.get('lenzz_users',{});
  if(mode==='register'){ if(users[email]){authMsg.textContent='E-Mail existiert bereits.';return} users[email]={email,pass}; store.set('lenzz_users',users); }
  else{ if(!users[email]||users[email].pass!==pass){authMsg.textContent='Ung√ºltige Zugangsdaten.';return} }
  STATE.user={email}; save(); hideAuth(); alert(`Willkommen, ${email}!`);
}
qs('#login').addEventListener('click',()=>loginOrRegister('login'));
qs('#register').addEventListener('click',()=>loginOrRegister('register'));
qs('#guest').addEventListener('click',()=>{STATE.user=null;save();hideAuth()});

/* ============ CHECKOUT ============ */
const coModal=qs('#co-modal'), coMsg=qs('#co-msg');
function showCheckoutForm(){coMsg.textContent=''; qs('#co-email').value=STATE.user?.email||''; coModal.classList.add('open')}
function hideCheckoutForm(){coModal.classList.remove('open')}
qs('#co-cancel').addEventListener('click',hideCheckoutForm);
qs('#to-checkout').addEventListener('click',()=>{ if(STATE.cart.length===0){alert('Dein Warenkorb ist leer.');return} if(!STATE.user){showAuth();authMsg.textContent='Tipp: Du kannst auch als Gast fortfahren.'} else{showCheckoutForm()} });
qs('#guest').addEventListener('click',()=>{hideAuth();showCheckoutForm();});

qs('#co-pay').addEventListener('click',()=>{
  const name=qs('#co-name').value.trim(), email=qs('#co-email').value.trim(), street=qs('#co-street').value.trim(), zip=qs('#co-zip').value.trim(), city=qs('#co-city').value.trim(), country=qs('#co-country').value;
  if(!name||!email||!street||!zip||!city||!country){coMsg.textContent='Bitte alle Felder ausf√ºllen.';return}
  STATE.user={...(STATE.user||{}),name,email,street,zip,city,country}; save();
  if(PAYMENT_MODE==='links'){
    if(STATE.cart.length===1){
      const only=STATE.cart[0], link=PRODUCT_PAYMENT_LINKS[only.id];
      if(link&&link.startsWith('http')){window.location.href=link;return}
    }
    const missing=STATE.cart.filter(it=>!PRODUCT_PAYMENT_LINKS[it.id]); if(missing.length){alert('F√ºr einige Produkte fehlt noch ein Zahlungslink (PRODUCT_PAYMENT_LINKS im Code).')}
    let msg='Kauf abschlie√üen:\n'; STATE.cart.forEach(it=>{const p=STATE.products.find(x=>x.id===it.id); const link=PRODUCT_PAYMENT_LINKS[it.id]||'(Link fehlt)'; msg+=`- ${p?.name||it.id} √ó ${it.qty}: ${link}\n`}); alert(msg); hideCheckoutForm(); return;
  } else { alert('Demo: Setze PAYMENT_MODE="links" und trage Stripe Payment Links ein.'); }
});

/* ============ ADMIN ============ */
const admModal=qs('#admin-modal'), admMsg=qs('#adm-msg');
function openAdmin(){admModal.classList.add('open')} function closeAdmin(){admModal.classList.remove('open')}
qs('#admin-open').addEventListener('click',openAdmin); qs('#btn-admin-hdr').addEventListener('click',openAdmin);
admModal.addEventListener('click',e=>{if(e.target===admModal)closeAdmin()});

qs('#adm-login').addEventListener('click',()=>{
  admMsg.textContent='';
  const em=(qs('#adm-email').value||'').trim().toLowerCase();
  const pw=(qs('#adm-pass').value||'').trim();
  if(em===ADMIN_EMAIL && pw===ADMIN_PASS){
    qs('#admin-auth').style.display='none';
    qs('#admin-app').classList.remove('hide');
    if(STATE.products[0]) fillProductForm(STATE.products[0]);
  } else { admMsg.textContent='Zugangsdaten ung√ºltig. Bitte exakt eingeben.'; }
});
qs('#close-admin').addEventListener('click',closeAdmin);

function fillProductForm(p){qs('#p-id').value=p?.id||'';qs('#p-name').value=p?.name||'';qs('#p-price').value=p?.price||'';qs('#p-cat').value=p?.category||'';qs('#p-img').value=p?.image||'';qs('#p-badges').value=(p?.badges||[]).join(', ')}
qs('#save-product').addEventListener('click',()=>{
  const p={id:qs('#p-id').value.trim(), name:qs('#p-name').value.trim(), price:parseFloat(qs('#p-price').value||'0'), category:qs('#p-cat').value.trim(), image:qs('#p-img').value.trim(), badges:(qs('#p-badges').value||'').split(',').map(s=>s.trim()).filter(Boolean)};
  if(!p.id||!p.name||!p.price||!p.category||!p.image){alert('Bitte alle Produktfelder ausf√ºllen.');return}
  const i=STATE.products.findIndex(x=>x.id===p.id); if(i>=0) STATE.products[i]=p; else STATE.products.push(p);
  save(); rebuildCategories(); applyFilters(); alert('Produkt gespeichert.');
});
qs('#delete-product').addEventListener('click',()=>{const id=qs('#p-id').value.trim(); if(!id) return; STATE.products=STATE.products.filter(p=>p.id!==id); STATE.cart=STATE.cart.filter(i=>i.id!==id); save(); rebuildCategories(); applyFilters(); updateCartUI(); alert('Produkt gel√∂scht.')});
qs('#export-json').addEventListener('click',()=>{const blob=new Blob([JSON.stringify(STATE.products,null,2)],{type:'application/json'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='lenzz-products.json'; a.click();});
qs('#import-json').addEventListener('click',()=>qs('#import-file').click());
qs('#import-file').addEventListener('change',async e=>{const f=e.target.files[0]; if(!f) return; const txt=await f.text(); try{const arr=JSON.parse(txt); if(!Array.isArray(arr)) throw 0; STATE.products=arr; save(); rebuildCategories(); applyFilters(); alert('Produkte importiert.')}catch{alert('Ung√ºltige JSON-Datei.')}});

/* ============ INIT ============ */
function init(){ rebuildCategories(); applyFilters(); updateCartUI(); }
init();
</script>
</body>
</html>
